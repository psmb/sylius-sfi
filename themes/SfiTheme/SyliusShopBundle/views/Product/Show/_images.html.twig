{% if product.imagesByType('main') is not empty %}
    {% set source_path = product.imagesByType('main').first.path %}
    {% set original_path = source_path|imagine_filter('sylius_shop_product_original') %}
    {% set path = source_path|imagine_filter(filter|default('sylius_shop_product_large_thumbnail')) %}
{% elseif product.images.first %}
    {% set source_path = product.images.first.path %}
    {% set original_path = source_path|imagine_filter('sylius_shop_product_original') %}
    {% set path = source_path|imagine_filter(filter|default('sylius_shop_product_large_thumbnail')) %}
{% else %}
    {% set original_path = '//placehold.it/400x300' %}
    {% set path = original_path %}
{% endif %}

{% if product.imagesByType('pdf') is not empty %}
    {% set preview_path = product.imagesByType('pdf').first.path %}
{% else %}
    {% set preview_path = '' %}
{% endif %}

<a target="_blank" href="/media/image/{{ preview_path }}" class="ui fluid image">
    <img src="{{ path|replace({'http:': 'https:'}) }}" id="main-image" alt="{{ product.name }}" />
</a>
{% if product.images|length > 1 %}

{{ sonata_block_render_event('sylius.shop.product.show.before_thumbnails', {'product': product}) }}

{% endif %}
